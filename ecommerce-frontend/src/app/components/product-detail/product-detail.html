<div class="container mt-4">
  @if (loading) {
    <div class="row">
      <div class="col-12 text-center">
        <div class="spinner-border" aria-label="Loading">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">Loading product details...</p>
      </div>
    </div>
  } @else if (error) {
    <div class="row">
      <div class="col-12">
        <div class="alert alert-danger">
          <h4>Error</h4>
          <p>{{ error }}</p>
          <button class="btn btn-primary" (click)="goBack()">
            <i class="fas fa-arrow-left me-2"></i>Back to Products
          </button>
        </div>
      </div>
    </div>
  } @else if (product) {
    <div class="row">
      <div class="col-12 mb-3">
        <button class="btn btn-secondary" (click)="goBack()">
          <i class="fas fa-arrow-left me-2"></i>Back to Products
        </button>
      </div>
    </div>
    
    <div class="row">
      <div class="col-md-6">
        <img 
          [src]="getImageUrl(product.imageUrl)" 
          [alt]="product.name" 
          class="img-fluid rounded shadow"
          (error)="onImageError($event)">
      </div>
      <div class="col-md-6">
        <div class="product-info">
          <h1 class="display-4">{{ product.name }}</h1>
          <p class="lead text-muted">{{ product.description }}</p>
          
          <div class="price-section mb-4">
            <h2 class="text-primary">${{ product.price | number:'1.2-2' }}</h2>
          </div>
          
          <div class="stock-info mb-4">
            @if (product.stockQuantity > 0) {
              <span class="badge bg-success">In Stock ({{ product.stockQuantity }} available)</span>
            } @else {
              <span class="badge bg-danger">Out of Stock</span>
            }
          </div>
          
          <div class="actions">
            <button 
              class="btn btn-primary btn-lg me-3" 
              (click)="addToCart(product)"
              [disabled]="product.stockQuantity === 0">
              <i class="fas fa-cart-plus me-2"></i>
              {{ product.stockQuantity === 0 ? 'Out of Stock' : 'Add to Cart' }}
            </button>
          </div>
          
          @if (product.category) {
            <div class="mt-4">
              <small class="text-muted">Category: {{ product.category }}</small>
            </div>
          }
        </div>
      </div>
    </div>
  }
</div>
